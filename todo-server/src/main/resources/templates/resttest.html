<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript">
    function fetch() {
    	var id = document.getElementById("id").value
    	
    	var xhr = new XMLHttpRequest();
    	xhr.open('GET', '/api/node/' + id);
    	xhr.setRequestHeader('Content-Type', 'application/json');
    	xhr.onload = function() {
    	    if (xhr.status === 200) {
    	        var data = JSON.parse(xhr.responseText);
    	        document.getElementById("result").innerHTML = xhr.responseText;
    	    }
    	};
    	xhr.send();
    	/*
    	JSON.stringify({
    	    name: 'John Smith',
    	    age: 34
    	})
    	*/
    	return false;
    }
    
    function update() {
    	var id = document.getElementById("id").value
    	var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
    	xmlhttp.open("POST", '/api/node/' + id);
    	xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    	xmlhttp.send(document.getElementById("result").value);
    	return false;
    }
    
    function create() {
    	//var id = document.getElementById("id").value
    	var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
    	xmlhttp.open("PUT", '/api/node');
    	xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    	xmlhttp.send(document.getElementById("result").value);
    	return false;
    }
    </script>
</head>
<body>

<form id="rest">
	<div>
		ID: <input type="number" size="5" value="0" id="id"><button onclick="return fetch();">Fetch</button>
	</div>
	<div>
		<textarea id="result" style="width: 40em; height: 15em;"></textarea>
	</div>
	<div>
		<button onclick="return update();">Update</button>
		<button onclick="return create();">Create</button>
	</div>
</form>

</body>
</html>